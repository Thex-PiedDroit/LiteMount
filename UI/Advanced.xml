<Ui xmlns="http://www.blizzard.com/wow/ui/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.blizzard.com/wow/ui/ ..\..\FrameXML\UI.xsd">

<!-- Copyright 2011-2019 Mike Battersby -->

<Script file="Advanced.lua" />

<Frame name="LiteMountAdvanced" hidden="true" inherits="LiteMountOptionsPanelTemplate">

    <Layers>
        <Layer level="ARTWORK">
            <FontString name="$parentExplainText" parentKey="ExplainText" inherits="GameFontNormal" justifyV="TOP" justifyH="LEFT" text="LM_ADVANCED_EXP">
                <Anchors>
                    <Anchor point="TOP" y="-48" />
                    <Anchor point="LEFT" x="48" />
                    <Anchor point="RIGHT" x="-48" />
                </Anchors>
            </FontString>
        </Layer>
    </Layers>

    <Frames>
        <ScrollFrame name="$parentEditScroll" parentKey="EditScroll" inherits="InputScrollFrameTemplate">
            <KeyValues>
                <KeyValue key="hideCharCount" value="false" type="boolean" />
            </KeyValues>

            <Anchors>
                <Anchor point="TOPLEFT" x="24" y="-160" />
                <Anchor point="BOTTOMRIGHT" x="-24" y="48" />
            </Anchors>

            <Scripts>
                <OnLoad>
                    InputScrollFrame_OnLoad(self)
                    self.EditBox:SetMaxLetters(0)

                    self.EditBox.SetOption = function (self, v, i)
                            LM_Options.db.profile.buttonActions[i] = v
                            LiteMount.actions[i]:CompileActions()
                        end
                    self.EditBox.GetOption = function (self, i)
                            return LM_Options.db.profile.buttonActions[i]
                        end
                    self.EditBox.GetOptionDefault = function (self, i)
                            return LM_Options.db.defaults.profile.buttonActions['*']
                        end

                    self.EditBox:SetScript('OnTextChanged',
                        function (self)
                            LiteMountOptionsControl_OnChanged(self)
                            ScrollingEdit_OnTextChanged(self, self:GetParent())
                        end)

                    LiteMountOptionsControl_OnLoad(self.EditBox, self:GetParent())
                </OnLoad>
                <OnShow>
                    self.EditBox:SetWidth(self:GetWidth() - 18)
                </OnShow>
            </Scripts>
        </ScrollFrame>

        <Button name="$parentRevertButton" parentKey="RevertButton" inherits="UIPanelButtonTemplate" text="UNLOCK">
            <Size x="96" y="22" />
            <Anchors>
                <Anchor point="TOPLEFT" relativePoint="BOTTOMLEFT" relativeKey="$parent.EditScroll" x="0" y="-12" />
            </Anchors>
            <Scripts>
                <OnShow function="LiteMountAdvancedRevert_OnShow" />
                <OnClick function="LiteMountAdvancedRevert_OnClick" />
            </Scripts>
        </Button>

        <Button name="$parentDefaultButton" parentKey="DefaultButton" inherits="UIPanelButtonTemplate" text="DEFAULT">
            <Size x="96" y="22" />
            <Anchors>
                <Anchor point="BOTTOMRIGHT" relativePoint="TOPRIGHT" relativeKey="$parent.EditScroll" x="0" y="12" />
            </Anchors>
            <Scripts>
                <OnClick>
                    local parent = self:GetParent()
                    LiteMountOptionsControl_Default(parent.EditScroll.EditBox, true)
                    LiteMountOptionsControl_Refresh(parent.EditScroll.EditBox)
                </OnClick>
            </Scripts>
        </Button>

        <Frame name="$parentBindingDropDown" parentkey="BindingDropDown" inherits="UIDropDownMenuTemplate">
            <Size x="93" y="22" />
            <Anchors>
                <Anchor point="BOTTOMLEFT" relativePoint="TOPLEFT" relativeKey="$parent.EditScroll" x="0" y="12" />
            </Anchors>
        </Frame>

        <EditBox name="$parentDocURL" parentKey="DocURL" autoFocus="false" ignoreArrows="true">
            <Size y="16" />
            <Fontstring inherits="GameFontHighlight" />
            <Anchors>
                <Anchor point="TOPLEFT" relativeKey="$parent.ExplainText" relativePoint="BOTTOMLEFT" y="-12" x="16" />
                <Anchor point="RIGHT" x="-16" />
            </Anchors>
            <Scripts>
                <OnLoad>
                    self.url = 'https://www.curseforge.com/wow/addons/litemount/pages/advanced-options'
                </OnLoad>
                <OnShow>
                    self:SetText(self.url)
                </OnShow>
                <OnTextChanged>
                    self:SetText(self.url)
                    self:HighlightText()
                </OnTextChanged>
                <OnEditFocusGained>
                    self:HighlightText()
                </OnEditFocusGained>
                <OnEscapePressed function="EditBox_ClearFocus" />
            </Scripts>
        </EditBox>

    </Frames>

    <Scripts>
        <OnLoad function="LiteMountAdvanced_OnLoad" />
    </Scripts>
</Frame>

</Ui>
