<Ui xmlns="http://www.blizzard.com/wow/ui/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.blizzard.com/wow/ui/ ..\..\FrameXML\UI.xsd">

<!-- Copyright 2011-2019 Mike Battersby -->

<Script file="CombatMacro.lua" />

<Frame name="LiteMountCombatMacro" hidden="true" inherits="LiteMountOptionsPanelTemplate">

    <Frames>
        <ScrollFrame name="$parentEditScroll" parentKey="EditScroll" inherits="InputScrollFrameTemplate">
            <KeyValues>
                <KeyValue key="maxLetters" value="255" type="number" />
            </KeyValues>

            <Size x="400" y="200" />

            <Anchors>
                <Anchor point="CENTER" />
            </Anchors>

            <Scripts>
                <OnLoad>
                    InputScrollFrame_OnLoad(self)

                    self.EditBox:SetScript('OnTextChanged', function (self)
                            InputScrollFrame_OnTextChanged(self)
                            LiteMountOptionsControl_OnChanged(self:GetParent())
                        end)

                    self.GetOption = function (self)
                            return LM_Options.db.char.combatMacro or ""
                        end
                    self.SetOption = function (self, v)
                            LM_Options.db.char.combatMacro = v
                            LiteMount:Refresh()
                        end
                    self.GetOptionDefault = function (self)
                            return LM_Actions:DefaultCombatMacro()
                        end

                    LiteMountOptionsControl_OnLoad(self)
                </OnLoad>
            </Scripts>
            <FontString inherits="GameFontHighlight" />
        </ScrollFrame>

        <Button inherits="UIPanelButtonTemplate" text="DELETE">
            <Size x="96" y="22" />
            <Anchors>
                <Anchor point="TOPRIGHT" relativePoint="BOTTOMRIGHT" relativeKey="$parent.EditScroll" x="0" y="-12" />
            </Anchors>
            <Scripts>
                <OnClick>
                    self:GetParent().EditScroll.EditBox:SetText("")
                </OnClick>
            </Scripts>
        </Button>

        <Button name="$parentRevertButton" parentKey="RevertButton" inherits="UIPanelButtonTemplate" text="REVERT">
            <Size x="96" y="22" />
            <Anchors>
                <Anchor point="BOTTOMLEFT" x="24" y="16" />
            </Anchors>
            <Scripts>
                <OnClick>
                    local parent = self:GetParent()
                    LiteMountOptionsPanel_Revert(parent)
                    LiteMountOptionsPanel_Refresh(parent)
                </OnClick>
            </Scripts>
        </Button>

        <Button name="$parentDefaultButton" parentKey="DefaultButton" inherits="UIPanelButtonTemplate" text="DEFAULT">
            <Size x="96" y="22" />
            <Anchors>
                <Anchor point="BOTTOMRIGHT" relativePoint="TOPRIGHT" relativeKey="$parent.EditScroll" x="0" y="12" />
            </Anchors>
            <Scripts>
                <OnClick>
                    self:GetParent().EditScroll.EditBox:SetText(LM_Actions:DefaultCombatMacro())
                </OnClick>
            </Scripts>
        </Button>

        <CheckButton name="$parentEnableButton" parentKey="EnableButton" inherits="OptionsBaseCheckButtonTemplate">
            <Anchors>
                <Anchor point="BOTTOMLEFT" relativePoint="TOPLEFT" relativeKey="$parent.EditScroll" y="32" />
            </Anchors>
            <Scripts>
                <OnLoad>
                    self.GetOption = function (self)
                            return LM_Options.db.char.useCombatMacro
                        end
                    self.GetOptionDefault = function (self) return false end
                    self.SetOption = function (self, v)
                            LM_Options.db.char.useCombatMacro = (v or false)
                        end
                    LiteMountOptionsControl_OnLoad(self)
                </OnLoad>
                <OnClick function="LiteMountOptionsControl_OnChanged" />
            </Scripts>
        </CheckButton>
    </Frames>

    <Layers>
        <Layer level="ARTWORK">
            <FontString inherits="GameFontNormal" justifyV="TOP" justifyH="LEFT" text="LM_COMBAT_MACRO_EXP">
                <Anchors>
                    <Anchor point="TOP" y="-48" />
                    <Anchor point="LEFT" relativePoint="LEFT" relativeKey="$parent.EditScroll" x="-50" />
                    <Anchor point="RIGHT" relativePoint="RIGHT" relativeKey="$parent.EditScroll" x="50" />
                    <Anchor point="BOTTOM" relativePoint="RIGHT" relativeKe="$parent.EditScroll" />
                </Anchors>
            </FontString>

            <FontString inherits="GameFontNormalLarge" name="$parentEnable" parentKey="Enable" text="ENABLE">
                <Anchors>
                    <Anchor point="LEFT" relativePoint="RIGHT" relativeKey="$parent.EnableButton" x="4" />
                </Anchors>
            </FontString>
            <FontString inherits="GameFontHighlightSmall" text="ENTER_MACRO_LABEL">
                <Anchors>
                    <Anchor point="BOTTOMLEFT" relativePoint="TOPLEFT" relativeKey="$parent.EditScroll" x="0" y="12" />
                </Anchors>
            </FontString>
        </Layer>
    </Layers>

    <KeyValues>
        <KeyValue key="dontShowProfile" value="true" type="boolean" />
    </KeyValues>

    <Scripts>
        <OnLoad function="LiteMountCombatMacro_OnLoad" />
    </Scripts>
</Frame>

</Ui>
