<Ui xmlns="http://www.blizzard.com/wow/ui/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.blizzard.com/wow/ui/ ..\..\FrameXML\UI.xsd">

<!-- Copyright 2011-2019 Mike Battersby -->

<Script file="MountsFilter.lua" />
<Script file="Mounts.lua" />

<Button name="LiteMountOptionsFlagButtonTemplate" virtual="true">
    <Size y="22" />

    <Layers>
        <Layer level="BACKGROUND">
            <Texture atlas="PetList-ButtonBackground" parentKey="background" />
        </Layer>

        <Layer level="ARTWORK">
            <FontString parentKey="Text" inherits="GameFontHighlight" justifyH="LEFT">
                <Anchors>
                    <Anchor point="LEFT" x="24" />
                    <Anchor point="RIGHT" x="-12" />
                </Anchors>
            </FontString>
        </Layer>

        <Layer level="OVERLAY" textureSubLevel="1">
            <Texture parentKey="SelectedTexture" atlas="PetList-ButtonSelect" hidden="true"/>
        </Layer>
    </Layers>

    <Frames>
        <Button parentKey="DeleteButton" hidden="true">
            <Size x="14" y="14" />
            <Anchors> <Anchor point="LEFT" x="6" /> </Anchors>
            <NormalTexture file="Interface\Buttons\UI-MinusButton-UP"/>
            <PushedTexture file="Interface\Buttons\UI-MinusButton-DOWN"/>
            <HighlightTexture file="Interface\Buttons\UI-PlusButton-Hilight" alphaMode="ADD"/>
            <Scripts>
                <OnClick>
                    local f = self:GetParent().flag
                    StaticPopup_Show("LM_OPTIONS_DELETE_FLAG", f, nil, f)
                </OnClick>
            </Scripts>
        </Button>
    </Frames>

    <HighlightTexture atlas="PetList-ButtonHighlight"/>

    <Scripts>
        <OnClick function="LiteMountOptionsFlagButton_OnClick" />
    </Scripts>

</Button>

<Button name="LiteMountOptionsMountButtonTemplate" inherits="SecureActionButtonTemplate" virtual="true">

    <Size x="208" y="46" />

    <Backdrop bgFile="Interface\Tooltips\UI-Tooltip-Background" edgeFile="Interface\Tooltips\UI-Tooltip-Border" tile="true">
        <Color r="0" b="0" g="0"/>
        <EdgeSize>
            <AbsValue val="16"/>
        </EdgeSize>
        <TileSize>
            <AbsValue val="16"/>
        </TileSize>
        <BackgroundInsets>
            <AbsInset left="4" right="4" top="4" bottom="4"/>
        </BackgroundInsets>
    </Backdrop>

    <Layers>
        <Layer level="BORDER">
            <Texture parentKey="Icon">
                <Size x="38" y="38" />
                <Anchors>
                    <Anchor point="LEFT" x="-42" />
                </Anchors>
            </Texture>
        </Layer>
        <Layer level="OVERLAY">
            <FontString inherits="GameFontNormal" justifyH="LEFT" parentKey="Name">
                <Anchors>
                    <Anchor point="LEFT" relativePoint="LEFT" x="16" />
                </Anchors>
            </FontString>
            <Texture parentKey="Unusable" setAllPoints="true" hidden="true">
                <Color r="1" g="0" b="0" />
            </Texture>
        </Layer>
        <Layer level="OVERLAY" textureSubLevel="1">
            <Texture parentKey="SelectedTexture" atlas="PetList-ButtonSelect" hidden="true"/>
        </Layer>
    </Layers>

    <Frames>
        <Button parentKey="DragButton" motionScriptsWhileDisabled="true">
            <Size x="40" y="40" />
            <Anchors>
                <Anchor point="CENTER" relativeKey="$parent.Icon" />
            </Anchors>
            <Scripts>
                <OnLoad>
                    self:RegisterForDrag("LeftButton")
                </OnLoad>
                <OnDragStart>
                    local mount = self:GetParent().mount
                    if mount.spellID then
                        PickupSpell(mount.spellID)
                    elseif mount.itemID then
                        PickupItem(mount.itemID)
                    end
                </OnDragStart>
            </Scripts>
        </Button>
    </Frames>

    <HighlightTexture atlas="PetList-ButtonHighlight"/>

    <Scripts>
        <OnEnter function="LiteMountOptionsMountButton_OnEnter" />
        <OnLeave function="LiteMountOptionsMountButton_OnLeave" />
        <OnLoad>
            self:SetAttribute("unit", "player")
            self:RegisterForClicks("RightButtonUp")
        </OnLoad>
    </Scripts>

</Button>

<Frame name="LiteMountOptionsMounts" hidden="true" inherits="LiteMountOptionsPanelTemplate">

    <Frames>
        <ScrollFrame inherits="MinimalHybridScrollFrameTemplate" parentKey="FlagScroll">
            <Size x="200" />
            <Anchors>
                <Anchor point="TOPLEFT" x="8" y="-84" />
                <Anchor point="BOTTOM" y="36" />
            </Anchors>
            <Scripts>
                <OnLoad function="LiteMountOptionsFlagScroll_OnLoad" />
                <OnSizeChanged function="LiteMountOptionsScrollFrame_OnSizeChanged" />
            </Scripts>
            <Frames>
                <Button parentKey="AddFlagButton" inherits="UIPanelButtonTemplate" text="ADD" hidden="true">
                    <Size x="96" y="22" />
                    <Scripts>
                        <OnClick>
                            StaticPopup_Show("LM_OPTIONS_NEW_FLAG")
                        </OnClick>
                    </Scripts>
                </Button>
            </Frames>

        </ScrollFrame>

        <ScrollFrame inherits="MinimalHybridScrollFrameTemplate" parentKey="MountScroll">
            <Size x="360" />
            <Anchors>
                <Anchor point="TOPRIGHT" x="-32" y="-84" />
                <Anchor point="BOTTOMRIGHT" x="-32" y="36" />
            </Anchors>
            <Scripts>
                <OnLoad function="LiteMountOptionsMountScroll_OnLoad" />>
                <OnSizeChanged function="LiteMountOptionsScrollFrame_OnSizeChanged" />
            </Scripts>
        </ScrollFrame>

        <CheckButton parentKey="AllSelect">
            <Size x="32" y="32" />
            <Anchors>
                <Anchor point="BOTTOMRIGHT" relativeKey="$parent.MountScroll" relativePoint="TOPRIGHT" x="-8" y="-2" />
            </Anchors>
            <Scripts>
                <OnClick function="LiteMountOptions_AllSelect_OnClick" />
            </Scripts>
            <NormalTexture file="Interface\Buttons\UI-CheckBox-Up"/>
            <PushedTexture file="Interface\Buttons\UI-CheckBox-Down"/>
            <HighlightTexture file="Interface\Buttons\UI-CheckBox-Highlight" alphaMode="ADD"/>
            <CheckedTexture file="Interface\Buttons\UI-CheckBox-Check"/>
            <DisabledCheckedTexture file="Interface\Buttons\UI-CheckBox-Check-Disabled"/>
        </CheckButton>

        <EditBox autofocus="false" inherits="SearchBoxTemplate" parentKey="Search" letters="40">
            <Size x="145" y="20" />
            <Anchors>
                <Anchor point="BOTTOMLEFT" relativeKey="$parent.MountScroll" relativePoint="TOPLEFT" x="8" y="5" />
            </Anchors>
            <Scripts>
                <OnTextChanged>
                    SearchBoxTemplate_OnTextChanged(self)
                    LM_UIFilter.SetSearchText(self:GetText())
                    LiteMountOptionsMounts.refresh()
                </OnTextChanged>
            </Scripts>
        </EditBox>

        <Button name="$parentFilterButton" parentKey="FilterButton" inherits="UIMenuButtonStretchTemplate" text="FILTER">
            <Size x="93" y="22" />
            <Anchors>
                <Anchor point="LEFT" relativeKey="$parent.Search" relativePoint="RIGHT" x="12" y="-0.5" />
            </Anchors>
            <Layers>
                <Layer level="ARTWORK">
                    <Texture parentKey="Icon" file="Interface\ChatFrame\ChatFrameExpandArrow">
                        <Size x="10" y="12"/>
                        <Anchors>
                            <Anchor point="RIGHT" relativeKey="$parent.Right" relativePoint="RIGHT" x="-5"/>
                        </Anchors>
                    </Texture>
                </Layer>
            </Layers>
            <Scripts>
                <OnClick>
                    local dd = self:GetParent().FilterDropDown
                    ToggleDropDownMenu(1, nil, dd, self:GetName(), 74, 15)
                </OnClick>
            </Scripts>
        </Button>

        <Frame parentKey="FilterDropDown" inherits="UIDropDownMenuTemplate">
            <Scripts>
                <OnLoad function="LiteMountOptionsMountsFilterDropDown_OnLoad" />
            </Scripts>
        </Frame>

    </Frames>

    <Scripts>
        <OnLoad function="LiteMountOptionsMounts_OnLoad" />
        <OnShow function="LiteMountOptionsMounts_OnShow" />
        <OnHide function="LiteMountOptionsMounts_OnHide" />
    </Scripts>

</Frame>

</Ui>
